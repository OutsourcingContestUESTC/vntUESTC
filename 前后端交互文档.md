# 前后端交互文档

## adminAdd

前端向后端传数据

数据格式：json

传输网址：adminAddSendDataUrl

渲染接口：<%=adminAddSendDataUrl%>

```js
  var sendData = {
                    "schoolName": $('#schoolName').val(),
                    "publicKey": $('#publicKey').val()
                };
/*传输到后端格式为：
{
     "schoolName": xxx,
     "publicKey":xxx
}*/  
                $.ajax({
                        type: "post",
                        url: "<%=adminAddSendDataUrl%>", //已留出后端渲染接口
                        data: sendData,
                        datatype: "json",
                    //文件类型为json
```

## logIn

前端向后端传数据

数据格式：json

传输网址：logInSendDataUrl

渲染接口：<%=logInSendDataUrl%>

```js
 var sendData = {
                    "stuNumber": $('#stuNumber').val(),
                    "password": $('#password').val()
                };
/* 传输到后端格式为：
{
     "stuNumber": xxx,
     "password":xxx
} */         
                $.ajax({
                    type: "post",
                    url: "<%=logInSendDataUrl%>", //已留出后端渲染接口
                    data: sendData,
                    datatype: "json",
```

## certificateQuery

前端向后端传数据

数据格式：文件file

传输网址：certificateQuerySendDataUrl

渲染接口：<%=certificateQuerySendDataUrl%>

```js
 // 获取文件列表
            var file = $('#ipt')[0].files;
            // 判断是否选择了文件
            if (file.length <= 0) {
                return alert('请上传文件')
            }
            // 创建formdata
            var fd = new FormData();
            // 向formdata中传入数据
            // fd.append()
            // file是一个伪数组
            fd.append('certificateFile', file[0]);      //https://developer.mozilla.org/en-US/docs/Web/API/FormData/append
            //formData.append(name, value);
            // 用ajax传送数据
            $.ajax({
                type: 'post',
                url: "<%=certificateQuerySendDataUrl%>",//上传数据目标网址,已留出后端渲染接口
                // 数据不需要编码
                contentType: false,
                // 数据对象不需要转换成键值对格式
                processData: false,
                data: fd,
```

## studentConfirmation

后端向前端传数据

渲染接口：<%=%>

 姓名<%=name%>

 籍贯<%=from%>

性别 <%=sex%>

民族<%=nationality%>

 身份证号 <%=IDNumber%>

学号<%=studentNumber%>

专业方向<%=major%>

学校<%=school%>

毕业证书<%=graduationCertificateNo%>

证书编号<%=CertificateNo%>

```js
  app.get('/',function(request,response){
            //调用渲染模板
            response.render('studentConfirmation',{
                //传参
                name:'', 
                from:'',
                sex:'',
                nationality:'',
                IDNumber:'',
                studentNumber:'',
                major:'',
                school:'',
                graduationCertificateNo:'',
                CertificateNo:''
            });
        
        });
```

## schoolRemoke

后端向前端传数据

渲染接口：<%=%>

 姓名<%=name%>

 籍贯<%=from%>

性别 <%=sex%>

民族<%=nationality%>

 身份证号 <%=IDNumber%>

学号<%=studentNumber%>

专业方向<%=major%>

学校<%=school%>

毕业证书<%=graduationCertificateNo%>

证书冻结日期<%=freezeDate%>

证书<%=CertificateNo%>

```js
 app.get('/',function(request,response){
            //调用渲染模板
            response.render('login',{
                //传参
                name:'', 
                from:'',
                sex:'',
                nationality:'',
                IDNumber:'',
                studentNumber:'',
                major:'',
                school:'',
                graduationCertificateNo:'',
                freezeDate:'',
                CertificateNo:''
            });
        
        });
```

